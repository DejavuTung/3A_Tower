# 敌人伤害检测问题修复

## 问题描述
用户报告："发现有的敌人中了好几箭也不掉血" - 箭矢击中敌人但没有造成伤害。

## 问题分析
经过代码检查，发现以下几个潜在问题：

1. **箭矢碰撞检测范围太小**：原来设置为0.2f，可能错过快速移动的敌人
2. **箭矢飞行时间太短**：0.5秒可能不够进行有效的碰撞检测
3. **缺乏详细的调试信息**：难以追踪伤害计算过程
4. **敌人血量可能为负数**：没有边界检查

## 修复方案

### 1. 增大箭矢碰撞检测范围
- 将碰撞检测范围从0.2f增加到0.4f
- 确保不会错过快速移动的敌人

### 2. 增加箭矢飞行时间
- 将飞行时间从0.5秒增加到0.8秒
- 给碰撞检测更多时间窗口

### 3. 添加详细的调试日志
在`MoveArrow`方法中添加：
- 箭矢碰撞检测成功的日志
- 攻击前后血量的对比
- 伤害值和敌人死亡状态的记录
- 目标敌人被销毁的警告

在`EnemyHealth.TakeDamage`方法中添加：
- 方法调用时的血量信息
- 伤害计算过程
- 血量边界检查
- 敌人死亡/存活状态

### 4. 增强错误处理
- 检查目标敌人是否存在
- 检查EnemyHealth组件是否存在
- 确保血量不会变成负数

## 修改的文件

### Assets/Scripts/AutoTowerDefenseDemo.cs
- `MoveArrow`方法：增大碰撞检测范围，增加飞行时间，添加详细日志
- 添加目标敌人存在性检查
- 添加EnemyHealth组件检查

### Assets/Scripts/EnemyHealth.cs
- `TakeDamage`方法：添加详细日志和边界检查
- 确保血量不会变成负数

## 测试建议
1. 运行游戏，观察Console中的调试信息
2. 检查箭矢是否成功检测到碰撞
3. 验证伤害计算是否正确
4. 确认敌人血量是否正确减少
5. 测试不同游戏速度下的碰撞检测

## 预期效果
- 箭矢碰撞检测更加可靠
- 敌人伤害计算更加准确
- 可以通过调试日志追踪问题
- 减少"中箭不掉血"的情况 